Step-1:
sudo apt update
sudo apt install gawk wget git-core diffstat unzip texinfo gcc-multilib \
     build-essential chrpath socat cpio python3 python3-pip python3-pexpect \
     xz-utils debianutils iputils-ping libsdl1.2-dev xterm

Step-2:
git clone git://git.yoctoproject.org/poky -b kirkstone
cd poky

Step-3:
git clone git://git.yoctoproject.org/meta-raspberrypi -b kirkstone
git clone git://git.openembedded.org/meta-openembedded -b kirkstone

Step-4:
source oe-init-build-env

Step-5: Edit conf/local.conf file 

MACHINE = "raspberrypi4"
IMAGE_FEATURES += "ssh-server-dropbear"

Step-6: Edit conf/bblayers.conf file 

BBLAYERS ?= " \
  /home/youruser/poky/meta \
  /home/youruser/poky/meta-poky \
  /home/youruser/poky/meta-yocto-bsp \
  /home/youruser/poky/meta-raspberrypi \
  /home/youruser/poky/meta-openembedded/meta-oe \
"

Step-7: Build minimal image 
bitbake core-image-minimal

Step-8: AFter build complete, images will be under path 
cd tmp/deploy/images/raspberrypi4/

You will find images like core-image-minimal-raspberrypi4.wic.bz2

Step-9 : Flash the sd card
bzcat core-image-minimal-raspberrypi4.wic.bz2 | sudo dd of=/dev/sdX bs=4M status=progress conv=fsync

